{"openapi":"3.1.0","info":{"title":"backend","description":"","license":{"name":""},"version":"0.1.0"},"paths":{"/v1/games":{"post":{"tags":[],"operationId":"create_game","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateGameRequest"}}},"required":true},"responses":{"201":{"description":"Game created","content":{"text/plain":{"schema":{"type":"integer","format":"int32"}}}},"400":{"description":"Bad request"}}}},"/v1/player_stats":{"get":{"tags":[],"operationId":"get_player_stats_list","responses":{"200":{"description":"玩家统计","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PlayerStats"}}}}}}}},"/v1/player_stats/{player_id}":{"get":{"tags":[],"operationId":"get_player_stats","parameters":[{"name":"player_id","in":"path","description":"玩家ID","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"玩家统计和比赛详情","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlayerStatsWithGames"}}}},"404":{"description":"玩家未找到"}}}},"/v1/players":{"get":{"tags":[],"operationId":"get_players","responses":{"200":{"description":"Player list","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Player"}}}}}}}},"/v1/tournaments":{"get":{"tags":[],"operationId":"get_tournaments","responses":{"200":{"description":"Tournament list with details","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TournamentDetail"}}}}}}},"post":{"tags":[],"operationId":"create_tournament","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTournamentRequest"}}},"required":true},"responses":{"201":{"description":"Tournament created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tournament"}}}},"400":{"description":"Bad request"}}}},"/v1/tournaments/{tournament_id}":{"get":{"tags":[],"operationId":"get_tournament","parameters":[{"name":"tournament_id","in":"path","description":"Tournament ID","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"Tournament detail","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TournamentDetail"}}}},"404":{"description":"Tournament not found"}}}}},"components":{"schemas":{"CreateGameRequest":{"type":"object","required":["tournament_id","session_name","player_results"],"properties":{"forfeit_game_point":{"type":["integer","null"],"format":"int32"},"player_results":{"type":"array","items":{"$ref":"#/components/schemas/CreatePlayerResultRequest"}},"session_name":{"type":"string"},"tournament_id":{"type":"integer","format":"int32"}}},"CreatePlayerResultRequest":{"type":"object","required":["player_id","game_point","table_point"],"properties":{"game_point":{"type":"integer","format":"int32"},"player_id":{"type":"integer","format":"int32"},"table_point":{"type":"number","format":"float"}}},"CreateTournamentRequest":{"type":"object","required":["name","sub_name","date","location"],"properties":{"date":{"type":"string","format":"date"},"location":{"type":"string"},"name":{"type":"string"},"sub_name":{"type":"string"}}},"GameDetail":{"type":"object","required":["game_id","tournament_id","tournament_name","tournament_sub_name","tournament_date","tournament_location","session_name","players"],"properties":{"game_id":{"type":"integer","format":"int32"},"players":{"type":"array","items":{"$ref":"#/components/schemas/PlayerGameResult"}},"session_name":{"type":"string"},"tournament_date":{"type":"string","format":"date"},"tournament_id":{"type":"integer","format":"int32"},"tournament_location":{"type":"string"},"tournament_name":{"type":"string"},"tournament_sub_name":{"type":"string"}}},"GameInfo":{"type":"object","required":["id","forfeit_game_point","player_results"],"properties":{"forfeit_game_point":{"type":"integer","format":"int32"},"id":{"type":"integer","format":"int32"},"player_results":{"type":"array","items":{"$ref":"#/components/schemas/PlayerGameResult"}}}},"Player":{"type":"object","required":["id","name"],"properties":{"id":{"type":"integer","format":"int32"},"name":{"type":"string"}}},"PlayerGameResult":{"type":"object","required":["player_id","player_name","game_point","table_point","place_point"],"properties":{"game_point":{"type":"integer","format":"int32"},"place_point":{"type":"number","format":"float"},"player_id":{"type":"integer","format":"int32"},"player_name":{"type":"string"},"table_point":{"type":"number","format":"float"}}},"PlayerStats":{"type":"object","required":["player_id","player_name"],"properties":{"avg_gp":{"type":["number","null"],"format":"float"},"avg_pp":{"type":["number","null"],"format":"float"},"avg_tp":{"type":["number","null"],"format":"float"},"first_place_count":{"type":["integer","null"],"format":"int64"},"first_place_ratio":{"type":["number","null"],"format":"float"},"fourth_place_count":{"type":["integer","null"],"format":"int64"},"fourth_place_ratio":{"type":["number","null"],"format":"float"},"game_count":{"type":["integer","null"],"format":"int64"},"player_id":{"type":"integer","format":"int32"},"player_name":{"type":"string"},"second_place_count":{"type":["integer","null"],"format":"int64"},"second_place_ratio":{"type":["number","null"],"format":"float"},"third_place_count":{"type":["integer","null"],"format":"int64"},"third_place_ratio":{"type":["number","null"],"format":"float"},"total_gp":{"type":["integer","null"],"format":"int64"},"total_pp":{"type":["number","null"],"format":"float"},"total_tp":{"type":["number","null"],"format":"float"}}},"PlayerStatsWithGames":{"allOf":[{"type":"object","required":["player_id","player_name"],"properties":{"avg_gp":{"type":["number","null"],"format":"float"},"avg_pp":{"type":["number","null"],"format":"float"},"avg_tp":{"type":["number","null"],"format":"float"},"first_place_count":{"type":["integer","null"],"format":"int64"},"first_place_ratio":{"type":["number","null"],"format":"float"},"fourth_place_count":{"type":["integer","null"],"format":"int64"},"fourth_place_ratio":{"type":["number","null"],"format":"float"},"game_count":{"type":["integer","null"],"format":"int64"},"player_id":{"type":"integer","format":"int32"},"player_name":{"type":"string"},"second_place_count":{"type":["integer","null"],"format":"int64"},"second_place_ratio":{"type":["number","null"],"format":"float"},"third_place_count":{"type":["integer","null"],"format":"int64"},"third_place_ratio":{"type":["number","null"],"format":"float"},"total_gp":{"type":["integer","null"],"format":"int64"},"total_pp":{"type":["number","null"],"format":"float"},"total_tp":{"type":["number","null"],"format":"float"}}},{"type":"object","required":["game_details"],"properties":{"game_details":{"type":"array","items":{"$ref":"#/components/schemas/GameDetail"}}}}]},"RoundPoint":{"type":"object","required":["table_point","game_point"],"properties":{"game_point":{"type":"integer","format":"int32"},"table_point":{"type":"number","format":"float"}}},"SessionDetail":{"type":"object","required":["info","games"],"properties":{"games":{"type":"array","items":{"$ref":"#/components/schemas/GameInfo"}},"info":{"$ref":"#/components/schemas/SessionInfo"}}},"SessionInfo":{"type":"object","required":["id","name"],"properties":{"id":{"type":"integer","format":"int32"},"name":{"type":"string"}}},"TotalPoint":{"type":"object","required":["table_point","game_point"],"properties":{"game_point":{"type":"integer","format":"int32"},"table_point":{"type":"number","format":"float"}}},"Tournament":{"type":"object","required":["id","name","sub_name","date","location"],"properties":{"date":{"type":"string","format":"date"},"id":{"type":"integer","format":"int32"},"location":{"type":"string"},"name":{"type":"string"},"sub_name":{"type":"string"}}},"TournamentDetail":{"type":"object","required":["id","info","summary","sessions"],"properties":{"id":{"type":"integer","format":"int32"},"info":{"$ref":"#/components/schemas/Tournament"},"sessions":{"type":"array","items":{"$ref":"#/components/schemas/SessionDetail"}},"summary":{"type":"array","items":{"$ref":"#/components/schemas/TournamentSummary"}}}},"TournamentSummary":{"type":"object","required":["player_id","player_name","tournament_place","total_point","round_point"],"properties":{"player_id":{"type":"integer","format":"int32"},"player_name":{"type":"string"},"round_point":{"type":"array","items":{"$ref":"#/components/schemas/RoundPoint"}},"total_point":{"$ref":"#/components/schemas/TotalPoint"},"tournament_place":{"type":"integer","format":"int32"}}}}}}